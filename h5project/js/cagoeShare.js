!function(e,i){"function"==typeof define&&(define.amd||define.cmd)?define((function(){return i(e)})):i(e,!0)}(this,(function(e,i){function n(i,n,a){e.WeixinJSBridge?WeixinJSBridge.invoke(i,r(n),(function(e){t(i,e,a)})):o(i,a)}function a(i,n,a){e.WeixinJSBridge?WeixinJSBridge.on(i,(function(e){a&&a.trigger&&a.trigger(e),t(i,e,n)})):o(i,a||n)}function r(e){return(e=e||{}).appId=B.appId,e.verifyAppId=B.appId,e.verifySignType="sha1",e.verifyTimestamp=B.timestamp+"",e.verifyNonceStr=B.nonceStr,e.verifySignature=B.signature,e}function t(e,i,n){delete i.err_code,delete i.err_desc,delete i.err_detail;var a=i.errMsg;a||(a=i.err_msg,delete i.err_msg,a=function(e,i){var n=e,a=p[n];a&&(n=a);var r="ok";if(i){var t=i.indexOf(":");"confirm"==(r=i.substring(t+1))&&(r="ok"),"failed"==r&&(r="fail"),-1!=r.indexOf("failed_")&&(r=r.substring(7)),-1!=r.indexOf("fail_")&&(r=r.substring(5)),"access denied"!=(r=(r=r.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=r||(r="permission denied"),"config"==n&&"function not exist"==r&&(r="ok"),""==r&&(r="fail")}return n+":"+r}(e,a),i.errMsg=a),(n=n||{})._complete&&(n._complete(i),delete n._complete),a=i.errMsg||"",B.debug&&!n.isInnerInvoke&&alert(JSON.stringify(i));var r=a.indexOf(":");switch(a.substring(r+1)){case"ok":n.success&&n.success(i);break;case"cancel":n.cancel&&n.cancel(i);break;default:n.fail&&n.fail(i)}n.complete&&n.complete(i)}function s(e){if(e){for(var i=0,n=e.length;i<n;++i){var a=e[i],r=u[a];r&&(e[i]=r)}return e}}function o(e,i){if(!(!B.debug||i&&i.isInnerInvoke)){var n=p[e];n&&(e=n),i&&i._complete&&delete i._complete,console.log('"'+e+'",',i||"")}}function l(){return(new Date).getTime()}function c(i){y&&(e.WeixinJSBridge?i():h.addEventListener&&h.addEventListener("WeixinJSBridgeReady",i,!1))}function d(){M.invoke||(M.invoke=function(i,n,a){e.WeixinJSBridge&&WeixinJSBridge.invoke(i,r(n),a)},M.on=function(i,n){e.WeixinJSBridge&&WeixinJSBridge.on(i,n)})}if(!e.jWeixin){var u={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},p=function(){var e={};for(var i in u)e[u[i]]=i;return e}(),h=e.document,f=h.title,m=navigator.userAgent.toLowerCase(),g=navigator.platform.toLowerCase(),T=!(!g.match("mac")&&!g.match("win")),C=-1!=m.indexOf("wxdebugger"),y=-1!=m.indexOf("micromessenger"),k=-1!=m.indexOf("android"),S=-1!=m.indexOf("iphone")||-1!=m.indexOf("ipad"),v=function(){var e=m.match(/micromessenger\/(\d+\.\d+\.\d+)/)||m.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),I=!1,w=!1,_={initStartTime:l(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},U={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",preVerifyState:1,systemType:S?1:k?2:-1,clientVersion:v,url:encodeURIComponent(location.href)},B={},b={_completes:[]},A={state:0,data:{}};c((function(){_.initEndTime=l()}));var M={config:function(e){B=e,o("config",e);var i=!1!==B.check;c((function(){if(i)n(u.config,{verifyJsApiList:s(B.jsApiList)},function(){b._complete=function(e){_.preVerifyEndTime=l(),A.state=1,A.data=e},b.success=function(e){U.preVerifyState=0},b.fail=function(e){b._fail?b._fail(e):A.state=-1};var e=b._completes;return e.push((function(){0!=U.preVerifyState&&(T||C||B.debug||v<"6.0.2"||U.systemType<0||I||(I=!0,U.appId=B.appId,U.initTime=_.initEndTime-_.initStartTime,U.preVerifyTime=_.preVerifyEndTime-_.preVerifyStartTime,M.getNetworkType({isInnerInvoke:!0,success:function(e){U.networkType=e.networkType;var i="http://open.weixin.qq.com/sdk/report?v="+U.version+"&o="+U.preVerifyState+"&s="+U.systemType+"&c="+U.clientVersion+"&a="+U.appId+"&n="+U.networkType+"&i="+U.initTime+"&p="+U.preVerifyTime+"&u="+U.url;(new Image).src=i}})))})),b.complete=function(i){for(var n=0,a=e.length;n<a;++n)e[n]();b._completes=[]},b}()),_.preVerifyStartTime=l();else{A.state=1;for(var e=b._completes,a=0,r=e.length;a<r;++a)e[a]();b._completes=[]}})),B.beta&&d()},ready:function(e){0!=A.state?e():(b._completes.push(e),!y&&B.debug&&e())},error:function(e){v<"6.0.2"||w||(w=!0,-1==A.state?e(A.data):b._fail=e)},checkJsApi:function(e){n("checkJsApi",{jsApiList:s(e.jsApiList)},(e._complete=function(e){if(k){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=function(e){var i=e.checkResult;for(var n in i){var a=p[n];a&&(i[a]=i[n],delete i[n])}return e}(e)},e))},onMenuShareTimeline:function(e){a(u.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||f,desc:e.title||f,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){a(u.onMenuShareAppMessage,{complete:function(i){"favorite"===i.scene?n("sendAppMessage",{title:e.title||f,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):n("sendAppMessage",{title:e.title||f,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){a(u.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||f,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){a(u.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||f,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){a(u.onMenuShareQZone,{complete:function(){n("shareQZone",{title:e.title||f,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){a("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){a("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(k){var i=e.localIds;try{i&&(e.localIds=JSON.parse(i))}catch(e){}}},e))},previewImage:function(e){n(u.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){n("getNetworkType",{},(e._complete=function(e){e=function(e){var i=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var a=i.indexOf(":"),r=i.substring(a+1);switch(r){case"wifi":case"edge":case"wwan":e.networkType=r;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},n(u.getLocation,{type:e.type||"wgs84"},(e._complete=function(e){delete e.type},e))},hideOptionMenu:function(e){n("hideOptionMenu",{},e)},showOptionMenu:function(e){n("showOptionMenu",{},e)},closeWindow:function(e){n("closeWindow",{},e=e||{})},hideMenuItems:function(e){n("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){n("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){n("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){n("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){n("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(S){var i=e.resultStr;if(i){var n=JSON.parse(i);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e))},openProductSpecificView:function(e){n(u.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var i=e.cardList,a=[],r=0,t=i.length;r<t;++r){var s=i[r],o={card_id:s.cardId,card_ext:s.cardExt};a.push(o)}n(u.addCard,{card_list:a},(e._complete=function(e){var i=e.card_list;if(i){for(var n=0,a=(i=JSON.parse(i)).length;n<a;++n){var r=i[n];r.cardId=r.card_id,r.cardExt=r.card_ext,r.isSuccess=!!r.is_succ,delete r.card_id,delete r.card_ext,delete r.is_succ}e.cardList=i,delete e.card_list}},e))},chooseCard:function(e){n("chooseCard",{app_id:B.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))},openCard:function(e){for(var i=e.cardList,a=[],r=0,t=i.length;r<t;++r){var s=i[r],o={card_id:s.cardId,code:s.code};a.push(o)}n(u.openCard,{card_list:a},e)},chooseWXPay:function(e){n(u.chooseWXPay,function(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}(e),e)}};return i&&(e.wx=e.jWeixin=M),M}})),function(){var root="undefined"!=typeof window?window:"object"==typeof process&&"function"==typeof require&&"object"==typeof global?global:this;root.WechatSDKModel={};var WechatSDKModel=root.WechatSDKModel,_getAbsoluteATag=document.createElement("A");function getAbsoluteUrl(e){return e.indexOf("http:")>=0||e.indexOf("https:")>=0?e:(_getAbsoluteATag.href=e,e=_getAbsoluteATag.href)}function getDefault(e,i){return null==e?i:"true"===e||"false"!==e&&e}function getUrlParameterDictionary(e){var i,n;null==e&&(e=location.href);for(var a=e.indexOf("?"),r=null,t=(e=e.substr(a+1)).split("&"),s=0;s<t.length;s++)(a=t[s].indexOf("="))>0&&(i=t[s].substring(0,a),n=t[s].substr(a+1),r||(r={}),r[i]=n);return r}var WXApiConfigUrl="",jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],shareTitle="",shareContent="",shareUrl=window.location.href,shareImgUrl="",shareSuccessCallBack=void 0,shareCancelCallBack=void 0,shareFailCallBack=void 0,shareFriendTitle="",shareFriendContent="",shareFriendUrl="",shareFriendImgUrl="",shareFriendSuccessCallBack=void 0,shareFriendCancelCallBack=void 0,shareFriendFailCallBack=void 0,shareTimelineTitle="",shareTimelineContent="",shareTimelineUrl="",shareTimelineImgUrl="",shareTimelineSuccessCallBack=void 0,shareTimelineCancelCallBack=void 0,shareTimelineFailCallBack=void 0,shareTypes={appmessage:"appmessage",timeline:"timeline",weibo:"weibo",qq:"qq",facebook:"facebook"};function setShare(e,i,n,a,r,t,s,o){e=shareTitle=getDefault(e,"设置分享标题"),i=shareContent=getDefault(i,"设置分享内容"),n=getDefault(n,i),a=shareUrl=getDefault(a,window.location.href),r=shareImgUrl=getDefault(r,getAbsoluteUrl("./images/ShareImg.jpg")),shareSuccessCallBack=t,shareCancelCallBack=s,shareFailCallBack=o,shareFriendTitle=shareTitle,shareFriendContent=shareContent,shareFriendUrl=shareUrl,shareFriendImgUrl=shareImgUrl,shareTimelineTitle=n,shareTimelineContent=n,shareTimelineUrl=shareUrl,shareTimelineImgUrl=shareImgUrl,""!==WXApiConfigUrl?bindJsApiEvent():($("body").prepend("<img class='sharePic' src='"+r+"' style='position:fixed;top: -1000px;left: -1000px;' />"),$(document).attr("title",e))}function shareToFriend(e,i,n,a,r,t,s){shareFriendTitle=e,shareFriendContent=i,n&&(shareFriendUrl=getAbsoluteUrl(n)),""===shareFriendUrl&&(shareFriendUrl=shareUrl),a&&(shareFriendImgUrl=getAbsoluteUrl(a)),""===shareFriendImgUrl&&(shareFriendImgUrl=shareImgUrl),shareFriendSuccessCallBack=r,shareFriendCancelCallBack=t,shareFriendFailCallBack=s,""!==WXApiConfigUrl&&bindJsApiEvent()}function shareToTimeline(e,i,n,a,r,t,s){shareTimelineTitle=e,shareTimelineContent=i,n&&(shareTimelineUrl=getAbsoluteUrl(n)),""===shareTimelineUrl&&(shareTimelineUrl=shareUrl),a&&(shareTimelineImgUrl=getAbsoluteUrl(a)),""===shareTimelineImgUrl&&(shareTimelineImgUrl=shareImgUrl),shareTimelineSuccessCallBack=r,shareTimelineCancelCallBack=t,shareTimelineFailCallBack=s,""!==WXApiConfigUrl&&bindJsApiEvent()}function setWXApiConfig(url,success,error){if(""===WXApiConfigUrl){WXApiConfigUrl=url;var _debug=!1,_urlConfig=getUrlParameterDictionary();_urlConfig&&_urlConfig.shareDebug&&1===Number(_urlConfig.shareDebug)&&(_debug=!0),url=getAbsoluteUrl(url);var _url=url+(url.indexOf("?")>0?"&":"?")+"url="+encodeURIComponent(location.href);_debug&&(_url+="&Debug=1",console.log("share API url:",url));var _dataType="jsonp",_type="get";0===url.indexOf(location.origin)&&(_dataType="text"),$.ajax({url:_url,type:_type,dataType:_dataType,success:function(data){success&&success(data),_debug&&console.log("share API back:",arguments),eval(data)},error:function(e){error&&error(0,e),console.warn("WechatSDKModel.setWXApiConfig Error:",e)}})}else error&&error(-1,"已经请求过接口")}function bindJsApiEvent(){wx.checkJsApi({jsApiList,success:function(e){}}),wx.onMenuShareAppMessage({title:shareFriendTitle,desc:shareFriendContent,link:shareFriendUrl,imgUrl:shareFriendImgUrl,trigger:function(e){},success:function(e){shareSuccessCallBack&&shareSuccessCallBack(shareTypes.appmessage),shareFriendSuccessCallBack&&shareFriendSuccessCallBack(shareTypes.appmessage)},cancel:function(e){shareCancelCallBack&&shareCancelCallBack(shareTypes.appmessage),shareFriendCancelCallBack&&shareFriendCancelCallBack(shareTypes.appmessage)},fail:function(e){shareFailCallBack&&shareFailCallBack(shareTypes.appmessage),shareFriendFailCallBack&&shareFriendFailCallBack(shareTypes.appmessage)}}),wx.onMenuShareTimeline({title:""!==shareTimelineContent?shareTimelineContent:shareTimelineTitle,link:shareTimelineUrl,imgUrl:shareTimelineImgUrl,trigger:function(e){},success:function(e){shareSuccessCallBack&&shareSuccessCallBack(shareTypes.timeline),shareTimelineSuccessCallBack&&shareTimelineSuccessCallBack(shareTypes.timeline)},cancel:function(e){shareCancelCallBack&&shareCancelCallBack(shareTypes.timeline),shareTimelineCancelCallBack&&shareTimelineCancelCallBack(shareTypes.timeline)},fail:function(e){shareFailCallBack&&shareFailCallBack(shareTypes.timeline),shareTimelineFailCallBack&&shareTimelineFailCallBack(shareTypes.timeline)}}),wx.onMenuShareQQ({title:shareTitle,desc:shareContent,link:shareUrl,imgUrl:shareImgUrl,trigger:function(e){},complete:function(e){},success:function(e){shareSuccessCallBack&&shareSuccessCallBack(shareTypes.qq)},cancel:function(e){shareCancelCallBack&&shareCancelCallBack(shareTypes.qq)},fail:function(e){shareFailCallBack&&shareFailCallBack(shareTypes.qq)}}),wx.onMenuShareWeibo({title:shareTitle,desc:shareContent,link:shareUrl,imgUrl:shareImgUrl,trigger:function(e){},complete:function(e){},success:function(e){shareSuccessCallBack&&shareSuccessCallBack(shareTypes.weibo)},cancel:function(e){shareCancelCallBack&&shareCancelCallBack(shareTypes.weibo)},fail:function(e){shareFailCallBack&&shareFailCallBack(shareTypes.weibo)}})}WechatSDKModel.setShare=setShare,WechatSDKModel.shareToFriend=shareToFriend,WechatSDKModel.shareToTimeline=shareToTimeline,WechatSDKModel.setWXApiConfig=setWXApiConfig,WechatSDKModel.bindJsApiEvent=bindJsApiEvent,wx.error((function(e){})),wx.ready((function(){bindJsApiEvent()}))}();